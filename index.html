<!doctype html>

<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="style.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;400&display=swap" rel="stylesheet">
	<script>
		// TODO: create a handler
	function getPosOrNeg(){
		return Math.random() < 0.5 ? -1 : 1;
	}

    window.addEventListener("load", function(){
        const searchForm = document.getElementById("searchForm");

		const engines = {
			Google: "https://www.google.com/search",
			DuckDuckGo: "https://www.duckduckgo.com/",
			Bing: "https://www.bing.com/search",
			Ask: "https://www.ask.com/web"
		}

		const fakeBingGroup = document.querySelector(".fake-bing-group");
		const originalBingGroup = document.querySelector(".bing-group");
		const fakeBingInput = document.getElementById("fakeBingInput");

		let numClicks = 0;

		// set bing location
		let rect = originalBingGroup.getBoundingClientRect();
		
		fakeBingGroup.style.left = rect.left + "px";
		fakeBingGroup.style.top = rect.top + "px";

		searchForm.addEventListener("submit", function(event){
			let engine = document.querySelector("input[name=engine]:checked");
			searchForm.action = engines[engine.value];
		})

		fakeBingGroup.addEventListener("click", function(event){
			event.preventDefault();
			numClicks++;
			if (numClicks < 5){
				fakeBingInput.checked = false;
				let currentRect = fakeBingGroup.getBoundingClientRect();
				fakeBingGroup.style.left = currentRect.left + (getPosOrNeg() * 15) + "px";
				fakeBingGroup.style.top = currentRect.top + (getPosOrNeg() * 15) + "px";
			}
			else {
				fakeBingGroup.style.display = "none";
				originalBingGroup.classList.remove("hidden");
			}
		});

    });
	</script>

</head>

<body>
	<div class="container">
		<form id="searchForm" target="_blank">
			<div class="searchBox">
				<input type="text" id="searchText" name="q">
			</div>
			

			

			<div class="radios">
				<div class="input-group">
					<input type="radio" id="radGoogle" name="engine" value="Google" checked="true">
					<label for="Google">Google</label>
				</div>
			   	
				<div class="input-group">
					<input type="radio" name="engine" value="DuckDuckGo">
					<label for="DuckDuckGo">DuckDuckGo</label>
				</div>

				<div class="input-group bing-group hidden">
					<input type="radio" name="engine" value="Bing">
					<label for="Bing">Bing</label>
				</div>	

				<div class="input-group fake-bing-group">
					<input type="radio" id="fakeBingInput" name="engine" value="Bing">
					<label for="Bing">Bing</label>
				</div>	

				<div class="input-group">
					<input type="radio" name="engine" value="Ask">
					<label for="Ask">Ask</label>
				</div>

			</div>
			
			<div class="buttons">
				<button id="submitBtn">Go</button>
			</div>

		</form>
	</div>

</body>